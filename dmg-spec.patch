--- gajim-source/mac/gajim.spec	2024-05-22 21:33:20.307106129 +0200
+++ gajim-source/mac/gajim.spec	2025-12-17 01:19:31.094522619 +0100
@@ -11,14 +11,17 @@
 }
 
 import sys
+import glob
+
 sys.path.insert(0, os.path.join(cwd))
-from gajim.common.modules import MODULES
-hiddenimports = ['gajim.common.modules.' + m for m in MODULES]
+modules = glob.glob("gajim/common/modules/*.py")
+modules_list = [os.path.basename(f)[:-3] for f in modules if not f.endswith("__init__.py")]
+hiddenimports = ['gajim.common.modules.' + m for m in modules_list]
 sys.path.pop(0)
 
 a = Analysis(['launch.py'],
              pathex=[cwd],
-             binaries=[],
+             binaries=[('/opt/homebrew/lib/libgtk-4.1.dylib', 'libgtk-4.1.dylib'), ('/opt/homebrew/lib/libgio-2.0.0.dylib', 'libgio-2.0.0.dylib')],
              datas=[('gajim', 'gajim')],
              hiddenimports=hiddenimports,
              hookspath=[],
